# Описане доработок

Т.к. в задаче не заявлено проблем с производительностью, доступностью и т.д., то можно дорабоать монолитное приложение, а не создавать микросервис. Но это может потребовать большего времени на тестированое. Судя по описанию, в компании отсутствует отдел ИБ, что сильно ускоряет вывод новых сервисов в прод. При желании можно создать отдельный сервис и выести его, но после адуита безопасности, воодушевленное результатами руководство, скорее-всего, подобные инициативы приостановит или начнет пропускать через вновь появившися отдел ИБ. Поэтому сделаем через монолит.

Необходимо доработать сервис tenant-core-app:
1. Добавить в него интеграцию с внешними поставщиками услуг: шлагбаума и управления домофоном
2. Добавить проверку доступа через сервер авторизации. Роль "Собственник". Добавить в сервис авторизации MFA. Разграничить доступ к данным с новых сервисов на уровне БД, выделив их в отдельную схему. Разделить пользователей БД на тех, кто может менять схему - для применения миграций БД - и на тех, кто может менять данные - для работы сервисов. Настроить шифрование резервных копий. Механизму создания резервных копий дать права только на создание новых файлов. Разрешение на обновление, чтение и удаление - запретить.
3. Добавить дополнительную проверку доступа по атрибуту "идентификатор собственника", который будет привязан к идентификатору пользователя сервиса авторизации. Таким образов каждый собственник будет иметь доступ только совбственным данным, привязанным в соответствующей таблице БД к нему. Доступы к продовской БД должны быть только у квалифицированных сотрудников службы поддержки, которые по запросу разработчиков при разборе инцендентов могут эти данные из БД получать, очищая от конф.данных и передавать разработчикам. Т.к. домофон привязан к квартире и услуга видеосвязи может быть платной, то при предоставлении доступа необходимо учитвать привязку собственника к квартире и факт оплаты услуги. Т.к. у собственника должен быть свободный доступ к придомовой территории, то скорее-всего пользование шлагбаумом будет бесплатным и можно предоставлять доступ к нему без всяких дополнительных проверок или привязки в БД - будет быстрее рабоать и давать меньшую нагрузку на систему.
4. Добавить сервис логов, сервис метрик, сервис мониторинга, сервис трассировки, анализатор трафика для выявления аттак. При отправке данных в указанные сервисы максировать конфеденциальные и персональные данные. Доступы на чтение должны быть только у разработчиков, которые выполняют задачи, связанные с разбором инцендентов (дежурными).
5. При передаче данных на всем пути от собвственника до датчиков использовать шифрование.
6. При передаче данных в DWH-хранилище удалять все персональные данные, например фото и видео съемки, удалять персональную информацию при переводе аудиозаписей в текстовый вид
7. Пароли хранить в специальных хранилищах, администраторами которых назначить сотрудников СБ
8. Доступ к новым внешним системам можно организовать через техническую учетку, которая будет меняться через определенный промежуток времени с наложением времени действия или через сертификат. Доступ внешним сервисам внутрь сети компании должен быть полностью закрыт.
